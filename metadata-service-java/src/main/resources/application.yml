server:
  port: ${SERVER_PORT:8080}

spring:
  datasource:
    url: ${DATABASE_URL:jdbc:postgresql://localhost:5432/metadata_service}
    username: ${DATABASE_USERNAME:postgres}
    password: ${DATABASE_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: ${JPA_SHOW_SQL:false}
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        jdbc:
          time_zone: UTC
  flyway:
    enabled: ${FLYWAY_ENABLED:true}
    locations: classpath:db/migration
    baseline-on-migrate: true
    validate-on-migrate: true

git:
  repository: ${GIT_REPOSITORY:file:///app/data}
  branch: ${GIT_BRANCH:main}
  pull-interval: ${GIT_PULL_INTERVAL:PT5M}
  local-cache-dir: ${LOCAL_CACHE_DIR:/tmp/schema-cache}

validation:
  default-version: ${DEFAULT_VERSION:latest}
  accepted-versions: ${ACCEPTED_VERSIONS:v1,v2}
  strict-mode: ${STRICT_MODE:true}

confluent:
  cloud:
    api-key: ${CONFLUENT_CLOUD_API_KEY:}
    api-secret: ${CONFLUENT_CLOUD_API_SECRET:}
    flink-compute-pool-id: ${CONFLUENT_FLINK_COMPUTE_POOL_ID:}
    flink-api-endpoint: ${CONFLUENT_FLINK_API_ENDPOINT:}

flink:
  local:
    enabled: ${FLINK_LOCAL_ENABLED:false}
    rest-api-url: ${FLINK_LOCAL_REST_API_URL:http://localhost:8082}

spring-boot:
  filters-yaml-path: ${SPRING_BOOT_FILTERS_YAML_PATH:../cdc-streaming/stream-processor-spring/src/main/resources/filters.yml}
  backup-enabled: ${SPRING_BOOT_YAML_BACKUP_ENABLED:true}
  backup-dir: ${SPRING_BOOT_YAML_BACKUP_DIR:/tmp/filters-yaml-backups}

jenkins:
  enabled: ${JENKINS_ENABLED:false}
  base-url: ${JENKINS_BASE_URL:http://localhost:8080}
  job-name: ${JENKINS_JOB_NAME:filter-integration-tests}
  username: ${JENKINS_USERNAME:}
  api-token: ${JENKINS_API_TOKEN:}
  build-token: ${JENKINS_BUILD_TOKEN:}
  trigger-on-create: ${JENKINS_TRIGGER_ON_CREATE:true}
  trigger-on-update: ${JENKINS_TRIGGER_ON_UPDATE:true}
  trigger-on-delete: ${JENKINS_TRIGGER_ON_DELETE:true}
  trigger-on-deploy: ${JENKINS_TRIGGER_ON_DEPLOY:true}
  trigger-on-approve: ${JENKINS_TRIGGER_ON_APPROVE:true}
  timeout-seconds: ${JENKINS_TIMEOUT_SECONDS:30}

logging:
  level:
    root: INFO
    com.example.metadata: DEBUG
